<html lang="es">
    <head>
        <title>Angry Birds Fan Club</title>
        <link rel="shortcut icon" href="/favicon1.ico" />
        <link rel="stylesheet" href="/css/stylesheetAll.css">
        <link rel="stylesheet" type="text/css" href="/css/stylesheetNoScript.css" />
        <link rel="stylesheet" type="text/css" href="/css/stylesheetLoad.css" />
        <link rel="stylesheet" type="text/css" href="/css/stylesheetadmin.css" />       
    </head>
    <body>
        <div id="loading">
            <div id="background"></div>
            <div id="midground"></div>
            <div id="foreground"></div>
            <div id="tapa"></div>
                <div class="bokeh">
                    <img id="bokeh1" src="/picture/space/ice.png" height="100px" >
                    <img id="bokeh2" src="/picture/space/bomb.png" height="100px">
                    <img id="bokeh3" src="/picture/space/green.png" height="100px">
                    <img id="bokeh4" src="/picture/space/laser.png" height="100px"> 
                <div id="circulo"></div>
            </div>
            <div id="bokehText">
            <p>Cargando...</p>
            </div>  
        </div>
        <div id="page">            
            <div id="body">
                <div id="header">
                    <p>Administrador</p>
                    <ul>
                        <li class="seleccionado">
                            Resumen 
                        </li>
                        <a href="/admin/usuarios">
                        <li>
                            Usuarios
                        </li>
                        </a>
                          <a href="/admin/noticias">
                            <li>
                              Noticias
                            </li>
                          </a>
                        <a href="/admin/imagenes">
                            <li>
                                Imagenes
                            </li>
                        </a>
                      <a href="/admin/videos">
                        <li>
                          Videos
                        </li>
                      </a>
                    </ul>
                </div>
                <div id="main">
                    <div id="usuario" class="resumen">
                        <h1 class="titulo">Usuarios</h1>
                        <table style="width: 100%;" >
                            <tr style="width: 50%;">
                                <td style="padding-top: 20px;padding-bottom: 20px;">
                                    <table class="datos" style=" margin: 0 auto;">
                                        <tr>
                                            <td>Bloqueado</td>
                                            <td>Cantidad</td>
                                            <td>Procentaje</td>
                                        </tr>
                                        <tr>
                                            <td>Bloqueados:</td>
                                            <td><%=@usu_act_bloq%></td>
                                            <td><%=(( @usu_act_bloq.to_f / @all_personas.count.to_f )*100).to_i%>%</td>
                                        </tr>
                                        <tr>
                                            <td>No bloqueados:</td>
                                            <td><%=@usu_act_no_bloq%></td>
                                          <td><%=(( @usu_act_no_bloq.to_f / @all_personas.count.to_f )*100).to_i%>%</td>
                                        </tr>
                                        <tr>
                                            <td>Total:</td>
                                            <td><%=(@usu_act_bloq.to_i + @usu_act_no_bloq.to_i )%></td>
                                            <td>100%</td>
                                        </tr>
                                    </table>
                                </td>
                              <td style="padding-top: 20px;padding-bottom: 20px;width: 50%">
                                  <div style="background: white; padding-top: 5px; border-radius: 5px; width: 214px; height: 209px; margin: 0 auto; position: relative;">
                                    <div id="grafico_usuario_bloqueado" style="margin: 0px auto; position: relative;background: white;border: solid 2px yellow;border-radius: 5px;"></div>
                                  </div>
                                </td>
                            </tr>
                          <tr style="width: 50%;">
                            <td style="padding-top: 20px;padding-bottom: 20px;">
                              <table class="datos" style=" margin: 0 auto;">
                                <tr>
                                  <td>Activo</td>
                                  <td>Cantidad</td>
                                  <td>Procentaje</td>
                                </tr>
                                <tr>
                                  <td>Activos:</td>
                                  <td><%=@usu_act%></td>
                                  <td><%=((@usu_act.to_f / @usu_act_t.to_f)* 100).to_i%>%</td>
                                </tr>
                                <tr>
                                  <td>No Activos:</td>
                                  <td><%=(@usu_act_t.to_i - @usu_act.to_i).to_s%></td>
                                  <td><%=(((@usu_act_t.to_f - @usu_act.to_f) / @usu_act_t.to_f)* 100).to_i%>%</td>
                                </tr>
                                <tr>
                                  <td>Total:</td>
                                  <td><%=@usu_act_t%></td>
                                  <td>100%</td>
                                </tr>
                              </table>
                            </td>
                            <td style="padding-top: 20px;padding-bottom: 20px;width: 50%">
                              <div style="background: white; padding-top: 5px; border-radius: 5px; width: 214px; height: 209px; margin: 0 auto; position: relative;">
                                 <div id="grafico_usuario_activo" style="margin: 0px auto; position: relative;background: white;border: solid 2px yellow;border-radius: 5px;"></div>
                              </div>
                            </td>
                          </tr>
                            <tr style="width: 50%;">
                              <td style="padding-top: 20px;padding-bottom: 20px;">
                                    <table class="datos" style=" margin: 0 auto;">
                                        <tr>
                                            <td>Genero</td>
                                            <td>Cantidad</td>
                                            <td>Procentaje</td>
                                        </tr>
                                        <tr>
                                            <td>Mujeres:</td>
                                            <td><%=@usu_gen_f%></td>
                                            <td><%=((@usu_gen_f.to_f / @usu_gen_t.to_f)* 100).to_i%>%</td>
                                        </tr>
                                        <tr>
                                            <td>Hombres:</td>
                                            <td><%=@usu_gen_m%></td>
                                            <td><%=((@usu_gen_m.to_f / @usu_gen_t.to_f)* 100).to_i%>%</td>
                                        </tr>
                                        <tr>
                                            <td>Total:</td>
                                            <td><%=@usu_gen_t%></td>
                                            <td>100%</td>
                                        </tr>
                                    </table>
                                </td>
                              <td style="padding-top: 20px;padding-bottom: 20px; width: 50%">
                                  <div style="background: white; padding-top: 5px; border-radius: 5px; width: 214px; height: 209px; margin: 0 auto; position: relative;">
                                    <div id="grafico_usuario_genero" style="margin: 0px auto; position: relative;background: white;border: solid 2px yellow;border-radius: 5px;"></div>
                                  </div>
                                </td>

                            </tr>

                        </table>
                        <h2 class="subtitulo">Clasificación de Usuarios por Edad</h2>
                        <div id="graph_usr_edad" style="height: 400px; position: relative; margin: 0 auto; margin-top: 50px; width: 800px;"></div>
                        <h2 class="subtitulo">Progreso de los Usuarios Activos en el tiempo</h2>
                        <div id="grafico_usuario_progreso" style="height: 400px; position: relative; margin: 0 auto; margin-top: 50px; width: 800px;"></div>

                    </div>
                    <div id="noticia" class="resumen">
                      <h1 class="titulo">Noticia</h1>
                      <table style="width: 100%;" >
                        <tr style="width: 50%;">
                          <td style="padding-top: 20px;padding-bottom: 20px;">
                            <table class="datos" style=" margin: 0 auto;">
                              <tr>
                                <td>Estrellas</td>
                                <td>Cantidad</td>
                                <td>Procentaje</td>
                              </tr>
                              <tr>
                                <td>Una Estrella:</td>
                                <td><%=@estrella1.to_a.size%></td>
                                <td><%=(( @estrella1.to_a.size.to_f / (@estrella1.to_a.size + @estrella2.to_a.size + @estrella3.to_a.size).to_f )*100).to_i%>%</td>
                              </tr>
                              <tr>
                                <td>Dos Estrellas:</td>
                                <td><%=@estrella2.to_a.size%></td>
                                <td><%=(( @estrella2.to_a.size.to_f / (@estrella1.to_a.size + @estrella2.to_a.size + @estrella3.to_a.size).to_f )*100).to_i%>%</td>
                              </tr>
                              <tr>
                                <td>Tres Estrellas:</td>
                                <td><%=@estrella3.to_a.size%></td>
                                <td><%=(( @estrella3.to_a.size.to_f / (@estrella1.to_a.size + @estrella2.to_a.size + @estrella3.to_a.size).to_f)*100).to_i%>%</td>
                              </tr>
                              <tr>
                                <td>Total:</td>
                                <td><%=(@estrella1.to_a.size + @estrella2.to_a.size + @estrella3.to_a.size)%></td>
                                <td>100%</td>
                              </tr>
                            </table>
                          </td>
                          <td style="padding-top: 20px;padding-bottom: 20px;width: 50%">
                            <div style="background: white; padding: 5px; border-radius: 5px; width: 214px; height: 204px; margin: 0 auto; position: relative;">
                              <div id="grafico_clasificacion_noticia" style="margin: 0px auto; position: relative;background: white;border: solid 2px yellow;border-radius: 5px;"></div>
                            </div>
                          </td>
                        </tr>
                      </table>
                      <h2 style="margin-top: 50px;" class="subtitulo">Progreso en el Tiempo del Número de Noticias</h2>
                      <div id="graph_not" style="height: 400px; position: relative; margin: 0 auto; margin-top: 50px; width: 800px;"></div>
                    </div>
                    <div id="imagen" class="resumen">
                      <h1 class="titulo">Imagenes</h1>
                      <h2 style="margin-top: 20px;" class="subtitulo">Progreso en el Tiempo del Número de Imagenes</h2>
                      <div id="graph_img" style="height: 400px; position: relative; margin: 0 auto; margin-top: 50px; width: 800px;"></div>
                    </div>
                    <div id="video" class="resumen">
                      <h1 class="titulo">Videos</h1>
                      <h2 style="margin-top: 20px;" class="subtitulo">Progreso en el Tiempo del Número de Videos</h2>
                      <div id="graph_vid" style="height: 400px; position: relative; margin: 0 auto; margin-top: 50px; width: 800px;"></div>
                    </div>
                </div>
            </div>
            <div id="footer">

              <a href="/logout" style="position: absolute; right: 20px; bottom: 0px;">
                <img src="/picture/exit1.png" style=" margin-top: 30px; margin-left: 20px;">
              </a>
              <a href="/" style="position: absolute; left:20px; bottom: 10px;">
                <img src="/picture/icon/back.png" height="80px" />
              </a>
            </div>
        </div>  
        

    <script src= '/js/scriptLoad.js' > </script>
    <script language="javascript">
            window.onload = inicio;
        </script>
    <noscript><div id="noscript"><br/>Javascript deshabilitado: para poder apreciar la pagina web por favor activa javascript en tu navegador</div></noscript>
    <script src="/js/jquery-1.7.1.min.js" type="text/javascript"></script>


    <script src="/js/jquery.backgroundPosition.js" type="text/javascript"></script>

    <script type="text/javascript">
        $(function(){
        
          $('#midground').css({backgroundPosition: '0px 0px'});
          $('#foreground').css({backgroundPosition: '0px 0px'});
          $('#background').css({backgroundPosition: '0px 0px'});
        
            $('#midground').animate({
                backgroundPosition:"(-10000px -2000px)"
            }, 240000, 'linear');
            
            $('#foreground').animate({
                backgroundPosition:"(-10000px -2000px)"
            }, 120000, 'linear');
            
            $('#background').animate({
                backgroundPosition:"(-10000px -2000px)"
            }, 480000, 'linear');
            
        });
    </script>
    <script src="/js/highcharts.js" type="text/javascript"></script>
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script>
      $(function() {
             if ($.browser.opera || $.browser.msie ) {
               alert( "Por favor no uses este navegador. Usa firefox o Chrome. Si no los tienes instalalos." );
         }
       });
    </script>
    <script>
        google.load("visualization", "1", {packages:["corechart"]});
        google.setOnLoadCallback(drawChart);
        function drawChart() {
            var data = google.visualization.arrayToDataTable([
                ['', 'Usuarios'],
                ['Bloqueados',     <%=@usu_act_bloq%>],
                ['No bloqueados',     <%=@usu_act_no_bloq%>]
            ]);

            var options = {
                pieHole: 0.4,
                //backgroundColor: '6DD4BC',
                legend: 'none',
                colors: ['6DD4BC'],
                pieSliceBorderColor: 'yellow',
                tooltip:{
                    showColorCode: false,

                }
            };

            var chart = new google.visualization.PieChart(document.getElementById('grafico_usuario_bloqueado'));
            chart.draw(data, options);

        }
    </script>
    <script>
        google.load("visualization", "1", {packages:["corechart"]});
        google.setOnLoadCallback(drawChart);
        function drawChart() {
            var data = google.visualization.arrayToDataTable([
                ['', 'Usuarios'],
                ['Mujeres',     <%=@usu_gen_f%>],
                ['Hombres',     <%=@usu_gen_m%>]
            ]);

            var options = {
                pieHole: 0.4,
                //backgroundColor: '6DD4BC',
                legend: 'none',
                colors: ['6DD4BC'],
                pieSliceBorderColor: 'yellow',
                tooltip:{
                    showColorCode: false,

                }
            };

            var chart = new google.visualization.PieChart(document.getElementById('grafico_usuario_genero'));
            chart.draw(data, options);

        }
    </script>
    <script>
        google.load("visualization", "1", {packages:["corechart"]});
        google.setOnLoadCallback(drawChart);
        function drawChart() {
            var data = google.visualization.arrayToDataTable([
                ['', 'Usuarios'],
                ['Activos',     <%=@usu_act%>],
                ['No Activos',   <%=(@usu_act_t.to_i - @usu_act.to_i)%>]
            ]);

            var options = {
                pieHole: 0.4,
                //backgroundColor: '6DD4BC',
                legend: 'none',
                colors: ['6DD4BC'],
                pieSliceBorderColor: 'yellow',
                tooltip:{
                    showColorCode: false,

                }
            };

            var chart = new google.visualization.PieChart(document.getElementById('grafico_usuario_activo'));
            chart.draw(data, options);

        }
    </script>
    <script>
        google.load("visualization", "1", {packages:["corechart"]});
        google.setOnLoadCallback(drawChart);
        function drawChart() {
            var data = google.visualization.arrayToDataTable([
                ['', 'Noticias'],
                ['1 estrellas',   <%=@estrella1.to_a.size%>],
                ['2 estrellas',   <%=@estrella2.to_a.size %>],
                ['3 estrellas',   <%=@estrella3.to_a.size %>]
            ]);

            var options = {
                pieHole: 0.4,
                //backgroundColor: '6DD4BC',
                legend: 'none',
                colors: ['6DD4BC'],
                pieSliceBorderColor: 'yellow',
                tooltip:{
                    showColorCode: false,

                }
            };

            var chart = new google.visualization.PieChart(document.getElementById('grafico_clasificacion_noticia'));
            chart.draw(data, options);

        }
    </script>
    <script>
        $(function () {
            $('#graph_usr_edad').highcharts({
                chart: {
                    type: "column",
                    zoomType: 'x',
                    spacingRight: 20
                },
                tooltip: {
                    headerFormat: '<span style="font-size:10px">Cantidad de usuarios registrados: <span style="color:{series.color};padding:0"><strong>{point.y}</strong></span></span>',
                    pointFormat: '',
                    shared: true,
                    useHTML: true
                },
                title: {
                    text: ''
                },
                legend: {
                    enabled: false
                },
                yAxis: {
                    gridLineWidth: 1,
                    gridLineColor: "yellow",
                    title: {
                        text: ''
                    }
                },
                xAxis: {

                    lineColor: "#6dd4bc",
                    categories: ['0-9', '10-19', '20-29', '30-39', '40-49', '50-59', '60-69', '70-79', '80-89', '90-99']
                },
                colors:
                        ["#6dd4bc"],
                series: [{
                    data: <%= @cuenta_edades %>
                }]
            });
        });
    </script>
    <script>
        $(function () {
            $('#grafico_usuario_progreso').highcharts({
                chart: {
                    type: "line",
                    zoomType: 'x',
                    spacingRight: 20
                },
                tooltip: {
                    headerFormat: '<span style="font-size:10px">Cantidad de usuarios registrados: <span style="color:{series.color};padding:0"><strong>{point.y}</strong></span></span>',
                    pointFormat: '',
                    shared: true,
                    useHTML: true
                },
                title: {
                    text: ''
                },
                legend: {
                    enabled: false
                },
                yAxis: {
                    gridLineWidth: 1,
                    gridLineColor: "yellow",
                    title: {
                        text: ''
                    }
                },
                xAxis: {

                    lineColor: "#6dd4bc",
                    categories: Etiquetas()
                },
                colors:
                        ["#6dd4bc"],
                series: [{
                    data: <%= @Progreso_usu %>
                }]
            });
        });
    </script>
    <script>
        $(function () {
            $('#graph_not').highcharts({
                chart: {
                    type: "line",
                    zoomType: 'x',
                    spacingRight: 20
                },
                tooltip: {
                    headerFormat: '<span style="font-size:10px">Cantidad de noticias registradas: <span style="color:{series.color};padding:0"><strong>{point.y}</strong></span></span>',
                    pointFormat: '',
                    shared: true,
                    useHTML: true
                },
                title: {
                    text: ''
                },
                legend: {
                    enabled: false
                },
                yAxis: {
                    gridLineWidth: 1,
                    gridLineColor: "yellow",
                    title: {
                        text: ''
                    }
                },
                xAxis: {

                    lineColor: "#6dd4bc",
                    categories: Etiquetas()
                },
                colors:
                        ["#6dd4bc"],
                series: [{
                    data: <%= @Progreso_not %>
                }]
            });
        });
    </script>
    <script>
        $(function () {
            $('#graph_img').highcharts({
                chart: {
                    type: "line",
                    zoomType: 'x',
                    spacingRight: 20
                },
                tooltip: {
                    headerFormat: '<span style="font-size:10px">Cantidad de imagenes registradas: <span style="color:{series.color};padding:0"><strong>{point.y}</strong></span></span>',
                    pointFormat: '',
                    shared: true,
                    useHTML: true
                },
                title: {
                    text: ''
                },
                legend: {
                    enabled: false
                },
                yAxis: {
                    gridLineWidth: 1,
                    gridLineColor: "yellow",
                    title: {
                        text: ''
                    }
                },
                xAxis: {

                    lineColor: "#6dd4bc",
                    categories: Etiquetas()
                },
                colors:
                        ["#6dd4bc"],
                series: [{
                    data: <%= @Progreso_img %>
                }]
            });
        });
    </script>
    <script>
        $(function () {
            $('#graph_vid').highcharts({
                chart: {
                    type: "line",
                    zoomType: 'x',
                    spacingRight: 20
                },
                tooltip: {
                    headerFormat: '<span style="font-size:10px">Cantidad de videos registrados: <span style="color:{series.color};padding:0"><strong>{point.y}</strong></span></span>',
                    pointFormat: '',
                    shared: true,
                    useHTML: true
                },
                title: {
                    text: ''
                },
                legend: {
                    enabled: false
                },
                yAxis: {
                    gridLineWidth: 1,
                    gridLineColor: "yellow",
                    title: {
                        text: ''
                    }
                },
                xAxis: {

                    lineColor: "#6dd4bc",
                    categories: Etiquetas()
                },
                colors:
                        ["#6dd4bc"],
                series: [{
                    data: <%= @Progreso_vid %>
                }]
            });
        });
    </script>
    <script>
        function Etiquetas(){
            return ['11 meses atás','10 meses atás','9 meses atás','8 meses atás','7 meses atás','6 meses atás','5 meses atás','4 meses atás','3 meses atás','2 meses atás','1 mes atás','Este mes'];
        }
    </script>
    </body>
</html>
