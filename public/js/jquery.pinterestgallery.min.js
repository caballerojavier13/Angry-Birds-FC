(function(d){var c;function f(g){var r=d(g.data.target);var q=g.data.root;var k=q.data("settings");var l=r.data("large");var m=d("div#"+k.largeContainerID);var o=m.find("div.assetContainer");var j=o.find("div.closeButton");var h=m.find("div.arrowButton");c=d.inArray(l,q.data("largeArr"));if(o[0]==null||o[0]==undefined){o=d('<div class="assetContainer"></div>').css("position","relative");m.append(o);j=d('<div class="closeButton"></div>');o.append(j);j.css("cursor","pointer").on("click",function(t){m.animate({opacity:0},300,function(){d(this).hide();m.find("img").remove();m.find("span").remove();m.find("iframe").remove()})});m.on("click",function(t){if(d(t.target).is("div#"+k.largeContainerID)||d(t.target).is(o)){m.animate({opacity:0},300,function(){d(this).hide();m.find("img").remove();m.find("span").remove();m.find("iframe").remove()})}});h=d('<div id="arrowButton"><div class="prevArrow"></div><div class="nextArrow"></div></div>');m.append(h);var s,i,n;s=d(".nextArrow",h).on("click",function(u){var t=c;t++;if(t>q.data("largeArr").length-1){t=0}b(q.data("itemArr")[t],q)});i=d(".prevArrow",h).on("click",function(u){var t=c;t--;if(t<0){t=q.data("largeArr").length-1}b(q.data("itemArr")[t],q)});n=s.height();var p=Math.ceil((d(window).height()-n)*0.5);h.css("top",p);d(window).resize(function(w){var u=Math.ceil((d(window).height()-n)*0.5);h.css("top",u);var t=o.find("img").outerWidth()||o.find("iframe").outerWidth();var v=o.find("img").outerHeight()||o.find("iframe").outerHeight();o.css({marginTop:(d(window).height()-v)*0.5+"px",marginLeft:(d(window).width()-t)*0.5+"px"})})}b(r,q);g.stopImmediatePropagation()}function b(o,n){var i=n.data("settings");var m=o.data("type");var j=o.data("large");var k=d("div#"+i.largeContainerID);var l=k.find("div.assetContainer");var h=l.find("div.closeButton").css("opacity",0);var g=k.find("div.arrowButton");c=d.inArray(j,n.data("largeArr"));l.css("opacity",0);k.find("img").remove();k.find("span").remove();k.find("iframe").remove();if(j!=""&&j!=undefined){k.show().stop(true,true).animate({opacity:1},300,function(){if(m!="video"){d("<img/>").load(function(){l.append('<img src="'+j+'"/>');var r=k.find("img");l.css({marginTop:(d(window).height()-this.height)*0.5+"px",marginLeft:(d(window).width()-this.width)*0.5+"px"});l.stop(true,true).animate({opacity:1},300);h.css({left:this.width-13+"px"}).delay(400).animate({opacity:1},300)}).attr("src",j)}else{var p=o.data("width");var q=o.data("height");l.stop(true,true).animate({opacity:1},300).append('<iframe src="'+j+' + "width="'+p+'"height="'+q+'"frameborder="0" webkitAllowFullScreen allowFullScreen />');h.css("left",p-13+"px").delay(400).animate({opacity:1},300);l.css({marginLeft:(d(window).width()-p)*0.5+"px",marginTop:(d(window).height()-q)*0.5+"px"})}})}}function e(j){var h=d(j.data.target);var i=j.data.root.data("settings");var k=h.find("."+i.frontContainer);var g=h.find("."+i.backContainer);h.stop(true,true).animate({opacity:1},100);if(!Modernizr.csstransitions){k.css("z-index",800).animate({opacity:0},300);g.css("z-index",900).animate({opacity:1},300)}else{k.css("z-index",800).removeClass("normal").addClass(i.animateStyle+" frontSide");g.css("z-index",900).removeClass("backSide").addClass(i.animateStyle+" normal")}j.stopImmediatePropagation()}function a(j){var h=d(j.data.target);var i=j.data.root.data("settings");var k,g;h.stop(true,true).animate({opacity:1},i.animateDelay,function(){k=h.find("."+i.frontContainer);g=h.find("."+i.backContainer);if(!Modernizr.csstransitions){k.css("z-index",900).animate({opacity:1},300);g.css("z-index",800).animate({opacity:0},300)}else{k.css("z-index",900).removeClass("frontSide").addClass("normal");g.css("z-index",800).removeClass("normal").addClass("backSide")}});j.stopImmediatePropagation()}d.fn.extend({pinterestGallery:function(p){var j={largeContainerID:"theLarge",gridOptions:{autoResize:true,container:d("#main"),offset:2,itemWidth:210},frontContainer:"front",backContainer:"back",animateStyle:"twirl",animateDelay:"400"};if(p){d.extend(j,p)}var l=this;l.data("settings",j);var o=l.find("li");o.wookmark(j.gridOptions);var k=d("div#"+j.largeContainerID);k.css("opacity",0).hide();var i,h;var m=[],n=[];var g=0;l.find("li").each(function(q){i=d(this).find("."+j.frontContainer);h=d(this).find("."+j.backContainer);if(d(this).data("large")!=undefined){d(this).css("cursor","pointer");n[g]=d(this);m[g]=d(this).data("large");g++}if(!Modernizr.csstransitions){h.css({"z-index":800,opacity:0});i.css("z-index",900)}else{h.css("z-index",800).addClass(j.animateStyle+" backSide");i.css("z-index",900)}d(this).on("mouseover",{target:d(this),root:l},e);d(this).on("mouseleave",{target:d(this),root:l},a);d(this).on("click",{target:d(this),root:l},f);d(this).find(".back").css("height",d(this).find(".front").outerHeight())});l.data("itemArr",n);l.data("largeArr",m);return this}})})(jQuery);